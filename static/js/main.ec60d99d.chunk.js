(this.webpackJsonpstars_stripes=this.webpackJsonpstars_stripes||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t),a.d(t,"calculateHorizontalScore",(function(){return j})),a.d(t,"calculateVerticalScore",(function(){return k})),a.d(t,"transposeDiagonalFromLeft",(function(){return C})),a.d(t,"transposeDiagonalFromRight",(function(){return D})),a.d(t,"calculateDiagonalFromLeftScore",(function(){return M})),a.d(t,"calculateDiagonalFromRightScore",(function(){return x})),a.d(t,"calculateScore",(function(){return H})),a.d(t,"isEndgame",(function(){return I})),a.d(t,"completeEndgame",(function(){return P})),a.d(t,"updateBlackout",(function(){return U}));var n=a(7),r=a(1),l=a(3),s=a(5),o=a(4),c=a(2),i=a(0),u=a.n(i),h=a(6),d=a.n(h),m=(a(14),document.getElementById("modal")),v=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).el=document.createElement("div"),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){m.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){m.removeChild(this.el)}},{key:"render",value:function(){return Object(h.createPortal)(this.props.children,this.el)}}]),a}(u.a.Component),p=function e(t,a){Object(c.a)(this,e),this.color=t,this.shape=a},f=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return 1!==this.props.currentStep?null:u.a.createElement("div",{className:"tutorialStep"},"Take turns dragging an X or O of your color onto the grid.",u.a.createElement("div",{className:"tutorial-board"},u.a.createElement("div",{className:"board-row"},u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square tutorial1animation4"},"X"),u.a.createElement("div",{className:"square"})),u.a.createElement("div",{className:"board-row"},u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"})),u.a.createElement("div",{className:"board-row"},u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square tutorial1animation3"},"X"),u.a.createElement("div",{className:"square"})),u.a.createElement("div",{className:"board-row"},u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square tutorial1animation5"},"O"),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"})),u.a.createElement("div",{className:"board-row"},u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square"})),u.a.createElement("div",{className:"board-row"},u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square tray tutorial1animationX"},"X"),u.a.createElement("div",{className:"square"}),u.a.createElement("div",{className:"square tray"},"O"),u.a.createElement("div",{className:"square"}))))}}]),a}(u.a.Component),b=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return 2!==this.props.currentStep?null:u.a.createElement("div",{className:"tutorialStep"},"The same symbol of opposite color cannot be placed next to each other. (Show hints appearing)")}}]),a}(u.a.Component),E=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return 3!==this.props.currentStep?null:u.a.createElement("div",{className:"tutorialStep"},"When no symbol can be placed in a square, it is blacked out. (Show)")}}]),a}(u.a.Component),S=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return 4!==this.props.currentStep?null:u.a.createElement("div",{className:"tutorialStep"},"Win by getting the most 3 on a rows of your color. Symbol doesn't matter. (Show board with lines drawn to indicate sets)")}}]),a}(u.a.Component);function g(e){return 1!==e.currentStep?u.a.createElement("button",{onClick:e.handlePrevious},"Previous"):null}function N(e){return e.currentStep<e.totalSteps?u.a.createElement("button",{onClick:e.handleNext},"Next"):null}function y(e){return e.showModal?u.a.createElement(v,null,u.a.createElement("div",{className:"modal"},u.a.createElement(f,{currentStep:e.currentStep}),u.a.createElement(b,{currentStep:e.currentStep}),u.a.createElement(E,{currentStep:e.currentStep}),u.a.createElement(S,{currentStep:e.currentStep}),u.a.createElement("div",{className:"navigation"},u.a.createElement(g,{currentStep:e.currentStep,handlePrevious:e.handlePrevious}),u.a.createElement("div",null,e.currentStep,"/",4),u.a.createElement(N,{currentStep:e.currentStep,totalSteps:4,handleNext:e.handleNext}),u.a.createElement("button",{onClick:e.handleHide},"Exit")))):null}function O(e){var t="square",a=null;return e.color?(t+=" "+e.color,"star"===e.shape?a="X":"circle"===e.shape&&(a="O")):e.hints&&e.hintShape&&e.hintColor&&e.legalMove[e.hintColor][e.hintShape]&&(t+=" "+e.hintColor+" hint"),u.a.createElement("div",{className:t,onDragOver:e.onDragOver,onDrop:e.onDrop},a)}var q=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"renderSquare",value:function(e,t){var a=this,n=this.props.squares[e][t];return u.a.createElement(O,{shape:n?n.shape:null,color:n?n.color:null,onDragOver:function(n){return a.props.onDragOver(n,e,t)},onDrop:function(n){return a.props.onDrop(n,e,t)},key:e+","+t,row:e,column:t,legalMove:this.props.legalMoves[e][t],hintShape:this.props.hintShape,hintColor:this.props.hintColor,hints:this.props.hints})}},{key:"createSquares",value:function(){for(var e=[],t=0;t<this.props.gridSize;t++){for(var a=[],n=0;n<this.props.gridSize;n++)a.push(this.renderSquare(t,n));e.push(u.a.createElement("div",{className:"board-row",key:t},a))}return e}},{key:"render",value:function(){return u.a.createElement("div",null,this.createSquares())}}]),a}(u.a.Component),w=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).handleDragOver=function(e,t,a){e.preventDefault()},n.handleDragStart=function(e,t){e.dataTransfer.setData("shape",t)},n.handleMouseDown=function(e,t){var a=n.state.blueIsNext?"blue":"red";n.setState({hintColor:a,hintShape:t})},n.handleMouseUp=function(e){n.setState({hintColor:null,hintShape:null})},n.handleHintsChange=function(e){var t=e.target.checked;n.setState({hints:t})},n.handleUndo=function(e){var t=n.state.history,a=t.squares.length>1?t.squares.slice(0,-1):t.squares.slice(),r=t.legalMoves.length>1?t.legalMoves.slice(0,-1):t.legalMoves.slice();t.squares=a,t.legalMoves=r,n.setState({history:t})},n.handleNewGame=function(e){var t=n.state.history,a=t.squares.slice(0,1),r=t.legalMoves.slice(0,1);t.squares=a,t.legalMoves=r,n.setState({history:t,blueIsNext:!0,hintColor:null,hintShape:null})};for(var l=[],s=0;s<5;s++){for(var o=[],i=0;i<5;i++)o.push({red:{star:!0,circle:!0},blue:{star:!0,circle:!0}});l.push(o)}return n.state={gridSize:5,history:{squares:[Array.from({length:5},(function(e){return Array(5).fill(null)}))],legalMoves:[l]},blueIsNext:!0,hints:!0,hintColor:null,hintShape:null,showModal:!1,currentStep:1},n.handleShow=n.handleShow.bind(Object(r.a)(n)),n.handleHide=n.handleHide.bind(Object(r.a)(n)),n.handlePrevious=n.handlePrevious.bind(Object(r.a)(n)),n.handleNext=n.handleNext.bind(Object(r.a)(n)),n.handleHintsChange=n.handleHintsChange.bind(Object(r.a)(n)),n.handleUndo=n.handleUndo.bind(Object(r.a)(n)),n.handleNewGame=n.handleNewGame.bind(Object(r.a)(n)),n}return Object(l.a)(a,[{key:"handleShow",value:function(){this.setState({showModal:!0})}},{key:"handleHide",value:function(){this.setState({showModal:!1})}},{key:"handlePrevious",value:function(){var e=this.state.currentStep;e-=1,this.setState({currentStep:e})}},{key:"handleNext",value:function(){var e=this.state.currentStep;e+=1,this.setState({currentStep:e})}},{key:"handleDrop",value:function(e,t,a){console.log("drop");var n=this.state.history,r=n.squares.slice(),l=r[r.length-1].map((function(e){return e.slice()})),s=e.dataTransfer.getData("shape"),o=this.state.blueIsNext?"blue":"red",c="star"===s?"circle":"star",i=this.state.blueIsNext?"red":"blue",u=n.legalMoves.slice(),h=JSON.parse(JSON.stringify(u[u.length-1]));if(h[t][a][o][s]){for(var d=this.state.gridSize,m=t-1;m<=t+1;m++)for(var v=a-1;v<=a+1;v++)m===t&&v===a&&(h[m][v][i][s]=!1,h[m][v][i][c]=!1,h[m][v][o][c]=!1,h[m][v][o][s]=!1),m>=0&&v>=0&&m<d&&v<d&&(h[m][v][i][s]=!1);l[t][a]=new p(o,s),document.getElementsByTagName("body")[0].style.setProperty("--player_color",this.state.blueIsNext?"var(--red_color)":"var(--blue_color)"),console.log("pre drop set state"),console.log(r),n.squares=r.concat([l]),n.legalMoves=u.concat([h]),this.setState({history:n,blueIsNext:!this.state.blueIsNext,hintColor:null,hintShape:null}),console.log("post drop set state"),console.log(r)}}},{key:"render",value:function(){var e=this;console.log("render");var t=this.state.history,a=t.squares.slice();console.log(a);var n=a[a.length-1].slice(),r=t.legalMoves.slice(),l=r[r.length-1].slice();n=U(n,l),I(l)&&(n=P(n,l));var s=H(n),o=s.red,c=s.blue;return u.a.createElement("div",{className:"game"},u.a.createElement("div",{className:"title"},u.a.createElement("h1",null,"Stars and Circles"),u.a.createElement("h2",null,"Game by Colin Thom"),u.a.createElement("h2",null,"Built by Sarah Edwards")),u.a.createElement("div",{className:"game-board"},u.a.createElement(q,{squares:n,gridSize:this.state.gridSize,onDragOver:function(t,a,n){return e.handleDragOver(t,a,n)},onDrop:function(t,a,n){return e.handleDrop(t,a,n)},legalMoves:l,hintShape:this.state.hintShape,hintColor:this.state.hintColor,hints:this.state.hints})),u.a.createElement("div",{className:"token-area"},u.a.createElement("div",{className:"token",onDragStart:function(t){return e.handleDragStart(t,"star")},onMouseDown:function(t){return e.handleMouseDown(t,"star")},onMouseUp:function(t){return e.handleMouseUp(t)},draggable:!0},"X"),u.a.createElement("div",{className:"token",onDragStart:function(t){return e.handleDragStart(t,"circle")},onMouseDown:function(t){return e.handleMouseDown(t,"circle")},onMouseUp:function(t){return e.handleMouseUp(t)},draggable:!0},"O")),u.a.createElement("div",{className:"score"},"Score:",u.a.createElement("div",{className:"red-score"},o),u.a.createElement("div",{className:"blue-score"},c)),u.a.createElement("div",{className:"controls"},u.a.createElement("label",{className:"hints"},"Hints",u.a.createElement("input",{name:"hints",type:"checkbox",checked:this.state.hints,onChange:this.handleHintsChange})),u.a.createElement("button",{onClick:this.handleUndo},"Undo"),u.a.createElement("button",{onClick:this.handleNewGame},"New"),u.a.createElement("div",{className:"tutorial"},u.a.createElement("button",{onClick:this.handleShow},"Rules"),u.a.createElement(y,{showModal:this.state.showModal,currentStep:this.state.currentStep,handleHide:this.handleHide,handlePrevious:this.handlePrevious,handleNext:this.handleNext}))))}}]),a}(u.a.Component);function j(e){var t={red:0,blue:0};for(var a in e)for(var n=0;n<e[0].length-2;n++){var r=e[a][n],l=e[a][n+1],s=e[a][n+2];r&&l&&s&&r.color===l.color&&r.color===s.color&&(t[r.color]+=1)}return t}function k(e){return console.log("calc: ",e),j(e[0].map((function(t,a){return e.map((function(e){return e[a]}))})))}function C(e){var t=[];for(var a in e){var n=Array(e[a].length-1-a).fill(null),r=Array(parseInt(a)).fill(null),l=n.concat(e[a].concat(r));t.push(l)}return t[0].map((function(e,a){return t.map((function(e){return e[a]}))}))}function D(e){var t=[];for(var a in e){var n=Array(parseInt(a)).fill(null),r=Array(e[a].length-1-a).fill(null),l=n.concat(e[a].concat(r));t.push(l)}return t[0].map((function(e,a){return t.map((function(e){return e[a]}))}))}function M(e){return j(C(e))}function x(e){return j(D(e))}function H(e){var t=j(e),a=k(e),n=M(e),r=x(e),l={red:0,blue:0};for(var s in l)l[s]=t[s]+a[s]+n[s]+r[s];return l}function I(e){var t,a={red:!1,blue:!1},r=Object(n.a)(e);try{for(r.s();!(t=r.n()).done;){var l,s=t.value,o=Object(n.a)(s);try{for(o.s();!(l=o.n()).done;){var c=l.value;for(var i in a)a[i]||!c[i].star&&!c[i].circle||(a[i]=!0)}}catch(u){o.e(u)}finally{o.f()}}}catch(u){r.e(u)}finally{r.f()}return!(a.red&&a.blue)}function P(e,t){alert("No choices left for remaining squares! Empty squares will be filled automatically.");var a=e.slice();for(var n in a)for(var r in a[n])if(!a[n][r]){var l=t[n][r];(l.red.star||l.red.circle)&&(a[n][r]=new p("red","null")),(l.blue.star||l.blue.circle)&&(a[n][r]=new p("blue","null"))}return a}function U(e,t){for(var a in e)for(var n in e[a]){var r=e[a][n],l=t[a][n];if(!r&&!l.red.circle&&!l.red.star&&!l.blue.circle&&!l.blue.star){var s=new p("black","null");e[a][n]=s}}return e}d.a.render(u.a.createElement(w,null),document.getElementById("root")||document.createElement("div"))},9:function(e,t,a){e.exports=a(15)}},[[9,1,2]]]);
//# sourceMappingURL=main.ec60d99d.chunk.js.map