{"version":3,"sources":["modal.js","index.js"],"names":["modalRoot","document","getElementById","Modal","props","el","createElement","appendChild","this","removeChild","createPortal","children","React","Component","Token","color","shape","Step1","currentStep","className","Step2","Step3","Step4","PreviousButton","onClick","handlePrevious","NextButton","totalSteps","handleNext","Tutorial","showModal","handleHide","Square","tokenName","symbol","hints","hintShape","hintColor","legalMove","onDragOver","onDrop","Board","row","column","square","squares","e","key","legalMoves","rows","gridSize","push","renderSquare","createSquares","Game","handleDragOver","preventDefault","handleDragStart","dataTransfer","setData","handleMouseDown","state","blueIsNext","setState","handleMouseUp","handleHintsChange","event","value","target","checked","handleUndo","history","squaresHistory","length","slice","legalMovesHistory","handleNewGame","rowIndex","columnIndex","Array","from","fill","handleShow","bind","console","log","map","a","getData","converseShape","converseColor","JSON","parse","stringify","currentRow","currentColumn","getElementsByTagName","style","setProperty","concat","updateBlackout","isEndgame","completeEndgame","score","calculateScore","redScore","red","blueScore","blue","handleDrop","onDragStart","onMouseDown","onMouseUp","draggable","name","type","onChange","calculateHorizontalScore","grid","scores","first","second","third","calculateVerticalScore","col","i","transposeDiagonalFromLeft","leftShift","prepend","append","parseInt","newRow","transposeDiagonalFromRight","rightShift","calculateDiagonalFromLeftScore","calculateDiagonalFromRightScore","horizontalScores","verticalScores","diagonalFromLeftScores","diagonalFromRightScores","anyLegal","alert","completed_squares","legal","token","ReactDOM","render"],"mappings":"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","file":"static/js/main.ec60d99d.chunk.js","sourcesContent":["// Modal.js\nimport React from 'react';\nimport { createPortal } from 'react-dom';\n// We get hold of the div with the id modal that we have created in index.html\nconst modalRoot = document.getElementById( 'modal' );\n\n\nclass Modal extends React.Component {\n    constructor(props) {\n        super(props);\n        // Create a div that we'll render the modal into. Because each\n        // Modal component has its own element, we can render multiple\n        // modal components into the modal container.\n        this.el = document.createElement('div');\n\n\n    }\n\n\n\n\n    componentDidMount() {\n        // Append the element into the DOM on mount. We'll render\n        // into the modal container element (see the HTML tab).\n        modalRoot.appendChild(this.el);\n    }\n\n    componentWillUnmount() {\n        // Remove the element from the DOM when we unmount\n        modalRoot.removeChild(this.el);\n    }\n\n\n    render() {\n        // Use a portal to render the children into the element\n        return createPortal(\n            // Any valid React child: JSX, strings, arrays, etc.\n            this.props.children,\n            // A DOM element\n            this.el,\n        );\n    }\n}\n\nexport default Modal;\n\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Modal from './modal';\n\n\n// styling\n// tutorial\n// quick instructions\n// mobile\n// accessibility\n// const vs let -- can make const squares, then do squares[i] = x, so not const?? can't do squares =x though\n// add tests for react components and interactivity\n// allow grid size to be set\n// bomb\n// add islands\n// auto play?\n\nclass Token {\n    constructor(color, shape) {\n        this.color = color;\n        this.shape = shape;\n    }\n}\n\n\nclass Step1 extends React.Component {\n    render() {\n        if (this.props.currentStep !== 1) { // Prop: The current step\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                Take turns dragging an X or O of your color onto the grid.\n                <div className={\"tutorial-board\"}>\n                <div className={\"board-row\"}>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square tutorial1animation4\"}>X</div>\n                    <div className={\"square\"}/>\n                </div>\n                <div className={\"board-row\"}>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                </div>\n                <div className={\"board-row\"}>\n                    <div className={\"square\"}/>\n                    <div className={\"square tutorial1animation3\"}>X</div>\n                    <div className={\"square\"}/>\n                </div>\n                <div className={\"board-row\"}>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square tutorial1animation5\"}>O</div>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                </div>\n                <div className={\"board-row\"}>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                    <div className={\"square\"}/>\n                </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square tray tutorial1animationX\"}>X</div>\n                        <div className={\"square\"}/>\n                        <div className={\"square tray\"}>O</div>\n                        <div className={\"square\"}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass Step2 extends React.Component {\n    render() {\n        if (this.props.currentStep !== 2) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                The same symbol of opposite color cannot be placed next to each other. (Show hints appearing)\n            </div>\n        )\n    }\n}\n\nclass Step3 extends React.Component {\n    render() {\n        if (this.props.currentStep !== 3) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                When no symbol can be placed in a square, it is blacked out. (Show)\n            </div>\n        )\n    }\n}\n\nclass Step4 extends React.Component {\n    render() {\n        if (this.props.currentStep !== 4) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                Win by getting the most 3 on a rows of your color. Symbol doesn't matter. (Show board with lines drawn to indicate sets)\n            </div>\n        )\n    }\n}\n\nfunction PreviousButton(props) {\n    if(props.currentStep !== 1) {\n        return (\n            <button onClick={props.handlePrevious}>Previous</button>\n        )\n    }\n    return null;\n}\n\nfunction NextButton(props) {\n    if(props.currentStep < props.totalSteps) {\n        return (\n            <button onClick={props.handleNext}>Next</button>\n        )\n    }\n    return null;\n}\n\n\nfunction Tutorial(props) {\n    const totalSteps = 4;\n        if (props.showModal) {\n            return (\n                <Modal>\n                    <div className=\"modal\">\n                        <Step1\n                            currentStep = {props.currentStep}\n                        />\n                        <Step2\n                            currentStep = {props.currentStep}\n                        />\n                        <Step3\n                            currentStep = {props.currentStep}\n                        />\n                        <Step4\n                            currentStep = {props.currentStep}\n                        />\n                        <div className=\"navigation\">\n                            <PreviousButton\n                                currentStep={props.currentStep}\n                                handlePrevious={props.handlePrevious}\n                            />\n                            <div>{props.currentStep}/{totalSteps}</div>\n                            <NextButton\n                                currentStep={props.currentStep}\n                                totalSteps={totalSteps}\n                                handleNext={props.handleNext}\n                            />\n                            <button onClick={props.handleHide}>Exit</button>\n                        </div>\n                    </div>\n                </Modal>\n            );\n        } else {\n            return null;\n    }\n\n}\n\nfunction Square(props) {\n    let tokenName = \"square\";\n    let symbol = null;\n    if (props.color) {\n        tokenName += (\" \" + props.color);\n        if (props.shape === 'star') {\n            symbol = 'X';\n        } else if (props.shape === 'circle') {\n            symbol = 'O';\n        }\n    } else if (props.hints && props.hintShape && props.hintColor && props.legalMove[props.hintColor][props.hintShape]) {\n        tokenName += (\" \" + props.hintColor + \" hint\")\n    }\n    return (\n        <div className={tokenName}\n                onDragOver={props.onDragOver}\n                onDrop={props.onDrop}>\n            {symbol}\n        </div>\n    );\n}\n\nclass Board extends React.Component {\n\n    renderSquare(row, column) {\n        const squares = this.props.squares;\n        const square = squares[row][column];\n        return (\n            <Square\n                shape={square ? square.shape : null}\n                color={square ? square.color : null}\n                onDragOver={(e) => this.props.onDragOver(e, row, column)}\n                onDrop={(e) => this.props.onDrop(e, row, column)}\n                key={row + ',' + column}\n                row={row}\n                column={column}\n                legalMove = {this.props.legalMoves[row][column]}\n                hintShape = {this.props.hintShape}\n                hintColor = {this.props.hintColor}\n                hints={this.props.hints}\n            />\n        );\n    }\n\n    createSquares() {\n        let rows = [];\n        for (let row = 0; row < this.props.gridSize; row++) {\n            let squares = [];\n            for (let column = 0; column < this.props.gridSize; column++) {\n                squares.push(this.renderSquare(row, column));\n            }\n            rows.push(<div className=\"board-row\" key={row}>{squares}</div>);\n        }\n        return rows;\n    }\n\n\n    render() {\n        return (\n            <div>\n                {this.createSquares()}\n            </div>\n        );\n    }\n}\n\nclass Game extends React.Component {\n    constructor(props) {\n        super(props);\n        let gridSize = 5;\n        let legalMoves = [];\n        for (let rowIndex = 0; rowIndex < gridSize; rowIndex++) {\n            let row = [];\n            for (let columnIndex = 0; columnIndex < gridSize; columnIndex++) {\n                row.push({\n                    'red': {\n                        'star': true,\n                        'circle' : true\n                    },\n                    'blue': {\n                        'star': true,\n                        'circle' : true\n                    }\n                });\n            }\n            legalMoves.push(row);\n        };\n        this.state = {\n            gridSize: gridSize,\n            history: {\n                squares: [Array.from({length: gridSize}, e => Array(gridSize).fill(null))],\n                legalMoves: [legalMoves]\n            },\n            // legalMoves: legalMoves,\n            blueIsNext: true,\n            hints: true,\n            hintColor: null,\n            hintShape: null,\n            showModal: false,\n            currentStep: 1,\n        };\n        // todo understand when need to bind\n        this.handleShow = this.handleShow.bind(this);\n        this.handleHide = this.handleHide.bind(this);\n        this.handlePrevious = this.handlePrevious.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleHintsChange = this.handleHintsChange.bind(this);\n        this.handleUndo = this.handleUndo.bind(this);\n        this.handleNewGame = this.handleNewGame.bind(this);\n\n    }\n\n\n\n    handleShow() {\n        this.setState({showModal: true});\n    }\n\n    handleHide() {\n        this.setState({showModal: false});\n    }\n\n    handlePrevious() {\n        let currentStep = this.state.currentStep\n        currentStep =  currentStep - 1;\n        this.setState({currentStep: currentStep});\n    }\n\n    handleNext() {\n        let currentStep = this.state.currentStep;\n        currentStep =  currentStep + 1;\n        this.setState({currentStep: currentStep});\n    }\n\n    handleDragOver = (e, row, column) => {\n        e.preventDefault();\n    }\n\n    handleDrop(e, row, column) {\n        console.log(\"drop\");\n        let history = this.state.history;\n        const squaresHistory = history.squares.slice();\n        let squares = squaresHistory[squaresHistory.length - 1].map(a => {return a.slice()})\n        let shape = e.dataTransfer.getData(\"shape\");\n        let color = (this.state.blueIsNext ? \"blue\" : \"red\");\n        let converseShape = (shape === \"star\" ? \"circle\" : \"star\");\n        let converseColor = (this.state.blueIsNext ? \"red\" : \"blue\");\n\n        // If the selected symbol cannot be legally placed in the square, don't allow it\n        const legalMovesHistory = history.legalMoves.slice();\n        let legalMoves = JSON.parse(JSON.stringify(legalMovesHistory[legalMovesHistory.length - 1]))\n\n        if (!(legalMoves[row][column][color][shape])){\n            return;\n        }\n\n        // Update the legal moves (red circle can't be next to blue circle, red star can't be next to blue star)\n        const gridSize = this.state.gridSize;\n        for (let currentRow = row-1; currentRow <= row+1; currentRow++) {\n            for (let currentColumn = column-1; currentColumn <= column+1; currentColumn++) {\n                if (currentRow === row && currentColumn === column) {\n                    legalMoves[currentRow][currentColumn][converseColor][shape] = false;\n                    legalMoves[currentRow][currentColumn][converseColor][converseShape] = false;\n                    legalMoves[currentRow][currentColumn][color][converseShape] = false;\n                    legalMoves[currentRow][currentColumn][color][shape] = false;\n                }\n                if (currentRow >=0 && currentColumn >=0 && currentRow < gridSize && currentColumn < gridSize) {\n                    legalMoves[currentRow][currentColumn][converseColor][shape] = false;\n                }\n            }\n        }\n\n        // Put a token in the square where the token was dropped\n        squares[row][column] = new Token(color, shape);\n\n        // update next player color\n        let body = document.getElementsByTagName(\"body\")[0];\n        body.style.setProperty(\"--player_color\", (this.state.blueIsNext ? \"var(--red_color)\" : \"var(--blue_color)\"));\n        console.log(\"pre drop set state\");\n        console.log(squaresHistory);\n        history.squares = squaresHistory.concat([squares])\n        history.legalMoves = legalMovesHistory.concat([legalMoves])\n        this.setState({\n            history: history,\n            blueIsNext: !this.state.blueIsNext,\n            // legalMoves: legalMoves,\n            hintColor: null,\n            hintShape: null,\n        });\n        console.log(\"post drop set state\");\n        console.log(squaresHistory);\n\n    }\n\n    handleDragStart = (e, shape) => {\n        e.dataTransfer.setData(\"shape\", shape);\n    }\n\n    handleMouseDown = (e, shape) => {\n        let color = (this.state.blueIsNext ? \"blue\" : \"red\");\n\n        this.setState({\n            hintColor: color,\n            hintShape: shape,\n        })\n    }\n\n    handleMouseUp = (e) => {\n        this.setState({\n            hintColor: null,\n            hintShape: null,\n        })\n    }\n\n    handleHintsChange = (event) => {\n        const target = event.target;\n        const value = target.checked;\n\n        this.setState({\n            hints: value\n        });\n    }\n\n    handleUndo = (event) => {\n        let history = this.state.history;\n        const squaresHistory = history.squares.length >1 ? history.squares.slice(0,-1) : history.squares.slice();\n        const legalMovesHistory = history.legalMoves.length >1 ? history.legalMoves.slice(0,-1) : history.legalMoves.slice();\n        history.squares = squaresHistory;\n        history.legalMoves = legalMovesHistory\n        this.setState({\n                history: history\n            }\n        )\n    }\n\n    handleNewGame = (event) => {\n        let history = this.state.history;\n        const squaresHistory = history.squares.slice(0,1);\n        const legalMovesHistory = history.legalMoves.slice(0,1);\n        history.squares = squaresHistory;\n        history.legalMoves = legalMovesHistory\n        this.setState({\n                history: history,\n                blueIsNext: true,\n                hintColor: null,\n                hintShape: null,\n            }\n        )\n    }\n\n\n    render() {\n        console.log(\"render\");\n        const history = this.state.history;\n\n        const squaresHistory = history.squares.slice();\n        console.log(squaresHistory);\n        let squares = squaresHistory[squaresHistory.length - 1].slice();\n        // const legalMoves = this.state.legalMoves.slice();\n        const legalMovesHistory = history.legalMoves.slice();\n        let legalMoves = legalMovesHistory[legalMovesHistory.length - 1].slice();\n\n        // Black out any squares that nothing can be placed in\n        squares = updateBlackout(squares,legalMoves);\n\n        // If one or both players has no more legal moves, fill in the remaining squares\n        if (isEndgame(legalMoves)) {\n            squares = completeEndgame(squares, legalMoves);\n        }\n\n        // Calculate the score\n        const score = calculateScore(squares);\n        const redScore = score.red;\n        const blueScore = score.blue;\n\n        // If all squares are filled, game over\n        // let status = null;\n        // if (allSquaresFilled) {\n        //     status = \"r\"\n        // }\n\n        return (\n            <div className=\"game\">\n                <div className=\"title\">\n                    <h1>Stars and Circles</h1>\n                    <h2>Game by Colin Thom</h2>\n                    <h2>Built by Sarah Edwards</h2>\n                </div>\n                <div className=\"game-board\">\n                    <Board\n                        squares={squares}\n                        gridSize={this.state.gridSize}\n                        onDragOver={(e, row, column) => this.handleDragOver(e, row, column)}\n                        onDrop={(e, row, column) => this.handleDrop(e, row, column)}\n                        legalMoves={legalMoves}\n                        hintShape={this.state.hintShape}\n                        hintColor={this.state.hintColor}\n                        hints={this.state.hints}\n                    />\n                </div>\n                <div className=\"token-area\">\n                    <div className=\"token\"\n                         onDragStart={(e) => this.handleDragStart(e, \"star\")}\n                         onMouseDown={(e) => this.handleMouseDown(e, \"star\")}\n                         onMouseUp={(e) => this.handleMouseUp(e)}\n                         draggable\n                    >X\n                    </div>\n                    <div className=\"token\"\n                         onDragStart={(e) => this.handleDragStart(e, \"circle\")}\n                         onMouseDown={(e) => this.handleMouseDown(e, \"circle\")}\n                         onMouseUp={(e) => this.handleMouseUp(e)}\n                         draggable\n                    >O\n                    </div>\n                </div>\n                <div className=\"score\">\n                    Score:\n                    <div className=\"red-score\">\n                        {redScore}\n                    </div>\n                    <div className=\"blue-score\">\n                        {blueScore}\n                    </div>\n                </div>\n                <div className=\"controls\">\n                    <label className={\"hints\"}>\n                        Hints\n                        <input\n                            name=\"hints\"\n                            type=\"checkbox\"\n                            checked={this.state.hints}\n                            onChange={this.handleHintsChange} />\n                    </label>\n                    <button onClick={this.handleUndo}>Undo</button>\n                    <button onClick={this.handleNewGame}>New</button>\n                    <div className=\"tutorial\">\n                        <button onClick={this.handleShow}>Rules</button>\n                        <Tutorial\n                            showModal={this.state.showModal}\n                            currentStep={this.state.currentStep}\n                            handleHide={this.handleHide}\n                            handlePrevious={this.handlePrevious}\n                            handleNext={this.handleNext}\n                        />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n// ========================================\n\n// ReactDOM.render(<Game />, document.getElementById(\"root\"));\nReactDOM.render(\n    (<Game />),\n    document.getElementById('root') || document.createElement('div') // for testing purposes\n);\n\n\n\nexport function calculateHorizontalScore(grid) {\n    let scores = {\n        'red' : 0,\n        'blue': 0\n    };\n\n    for (let row in grid) {\n        for (let column = 0; column < grid[0].length - 2; column ++) {\n            let first = grid[row][column];\n            let second = grid[row][column + 1];\n            let third = grid[row][column + 2];\n            if (first && second && third) {\n                if (first.color === second.color && first.color === third.color) {\n                    scores[first.color] += 1;\n                }\n            }\n        }\n    }\n\n    return scores\n}\n\nexport function calculateVerticalScore(grid) {\n    // transpose the grid\n    console.log(\"calc: \", grid);\n    let vertical = grid[0].map(function(col, i){\n        return grid.map(function(row){\n            return row[i];\n        });\n    });\n\n    // Calculate the transposed grid score\n    return calculateHorizontalScore(vertical)\n\n}\n\nexport function transposeDiagonalFromLeft(grid) {\n    // Shift the grid so that the diagonals from upper left to lower right are aligned vertically\n    // Pad the grid with nulls to maintain equal length of each row\n    // [\n    //     [0,1,2],\n    //     [3,4,5],\n    //     [6,7,8]\n    // ] becomes [\n    //   [ N, N, 0, 1, 2 ],\n    //   [ N, 3, 4, 5, N ],\n    //   [ 6, 7, 8, N, N ]\n    // ] where N is null\n    let leftShift = [];\n    for (let row in grid) {\n        let prepend = Array(grid[row].length - 1 - row).fill(null);\n        let append = Array(parseInt(row)).fill(null);\n        let newRow = prepend.concat(grid[row].concat(append));\n        leftShift.push(newRow);\n    }\n\n    // Transpose the grid so that the verticals become the horizontals\n    // [\n    //     [ N, N, 6 ],\n    //     [ N, 3, 7 ],\n    //     [ 0, 4, 8 ],\n    //     [ 1, 5, N ],\n    //     [ 2, N, N ]\n    //   ]\n    let diagonalFromLeft = leftShift[0].map(function(col, i){\n        return leftShift.map(function(row){\n            return row[i];\n        });\n    });\n    return diagonalFromLeft\n}\n\nexport function transposeDiagonalFromRight(grid) {\n    // Shift the grid so that the diagonals from upper right to lower left are aligned vertically\n    // Pad the grid with nulls to maintain equal length of each row\n    // [\n    //     [0,1,2],\n    //     [3,4,5],\n    //     [6,7,8]\n    // ] becomes [\n    //   [ 0, 1, 2, N, N],\n    //   [ N, 3, 4, 5, N],\n    //   [ N, N, 6, 7, 8 ]\n    // ] where N is null\n    let rightShift = [];\n    for (let row in grid) {\n        let prepend = Array(parseInt(row)).fill(null);\n        let append = Array(grid[row].length - 1 - row).fill(null);\n        let newRow = prepend.concat(grid[row].concat(append));\n        rightShift.push(newRow);\n    };\n\n    // Transpose the grid so that the verticals become the horizontals\n    // [\n    //     [ N, N, 6 ],\n    //     [ N, 3, 7 ],\n    //     [ 0, 4, 8 ],\n    //     [ 1, 5, N ],\n    //     [ 2, N, N ]\n    //   ]\n    let diagonalFromRight = rightShift[0].map(function(col, i){\n        return rightShift.map(function(row){\n            return row[i];\n        });\n    });\n    return diagonalFromRight\n}\n\nexport function calculateDiagonalFromLeftScore(grid) {\n    let diagonalFromLeft = transposeDiagonalFromLeft(grid);\n    return calculateHorizontalScore(diagonalFromLeft)\n}\n\nexport function calculateDiagonalFromRightScore(grid) {\n    let diagonalFromRight = transposeDiagonalFromRight(grid);\n    return calculateHorizontalScore(diagonalFromRight)\n}\n\nexport function calculateScore(squares) {\n\n    let horizontalScores = calculateHorizontalScore(squares);\n    let verticalScores = calculateVerticalScore(squares);\n    let diagonalFromLeftScores = calculateDiagonalFromLeftScore(squares);\n    let diagonalFromRightScores = calculateDiagonalFromRightScore(squares);\n\n    let scores = {\n        'red' : 0,\n        'blue': 0\n    };\n\n    for (let key in scores) {\n        scores[key]= (\n            horizontalScores[key]\n            + verticalScores[key]\n            + diagonalFromLeftScores[key]\n            + diagonalFromRightScores[key]\n        )\n    };\n    return scores;\n}\n\n\nexport function isEndgame(legalMoves) {\n    let anyLegal = {\n        'red': false,\n        'blue': false\n    };\n    for (let row of legalMoves) {\n        for (let square of row) {\n            for (let key in anyLegal) {\n                if (!anyLegal[key] && (square[key]['star'] || square[key]['circle'])) {\n                    anyLegal[key] = true\n                }\n            }\n        }\n    }\n    // If there are legal moves for BOTH red and blue remaining, return true\n    return !(anyLegal['red'] && anyLegal['blue']);\n}\n\nexport function completeEndgame(squares, legalMoves) {\n    alert(\"No choices left for remaining squares! Empty squares will be filled automatically.\")\n    // Fill in the squares with blue/red as possible\n    let completed_squares = squares.slice();\n    for (let rowIndex in completed_squares) {\n        for (let columnIndex in completed_squares[rowIndex]) {\n            // If the square is unoccupied\n            if (!completed_squares[rowIndex][columnIndex]) {\n                let legalMove = legalMoves[rowIndex][columnIndex];\n                if (legalMove['red']['star'] || legalMove['red']['circle']) {\n                    completed_squares[rowIndex][columnIndex] = new Token('red', 'null')\n                }\n                if (legalMove['blue']['star'] || legalMove['blue']['circle']) {\n                    completed_squares[rowIndex][columnIndex] = new Token('blue', 'null')\n                }\n            }\n        }\n    }\n    return completed_squares\n}\n\n\nexport function updateBlackout(squares, legalMoves) {\n    for (let rowIndex in squares) {\n        for (let columnIndex in squares[rowIndex]) {\n            let square = squares[rowIndex][columnIndex];\n            let legal = legalMoves[rowIndex][columnIndex];\n            if (!square && !legal['red']['circle'] && !legal['red']['star'] && !legal['blue']['circle'] && !legal['blue']['star']) {\n                let token = new Token('black', 'null');\n                squares[rowIndex][columnIndex] = token;\n            }\n        }\n    }\n    return squares\n}"],"sourceRoot":""}