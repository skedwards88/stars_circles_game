{"version":3,"sources":["modal.js","index.js"],"names":["modalRoot","document","getElementById","Modal","props","el","createElement","appendChild","this","removeChild","createPortal","children","React","Component","Token","color","shape","Step1","currentRule","className","Step2","Step3","Step4","PreviousButton","onClick","handlePrevious","NextButton","totalSteps","handleNext","Tutorial","showRules","handleHide","Square","tokenName","symbol","hints","hintShape","hintColor","legalMove","onDragOver","onDrop","Board","row","column","square","squares","targetKey","dropData","key","legalMoves","rows","gridSize","push","renderSquare","createSquares","Game","handleDragOver","e","preventDefault","handleMouseDown","state","blueIsNext","setState","handleMouseUp","handleHintsChange","event","value","target","checked","handleUndo","history","squaresHistory","length","slice","legalMovesHistory","getElementsByTagName","style","setProperty","handleNewGame","rowIndex","columnIndex","Array","from","fill","handleShow","bind","currentStep","dragData","map","a","converseShape","converseColor","JSON","parse","stringify","currentRow","currentColumn","concat","updateBlackout","isEndgame","completeEndgame","score","calculateScore","redScore","red","blueScore","blue","handleDrop","onDragStart","onMouseDown","onMouseUp","name","type","onChange","calculateHorizontalScore","grid","scores","first","second","third","calculateVerticalScore","col","i","transposeDiagonalFromLeft","leftShift","prepend","append","parseInt","newRow","transposeDiagonalFromRight","rightShift","calculateDiagonalFromLeftScore","calculateDiagonalFromRightScore","horizontalScores","verticalScores","diagonalFromLeftScores","diagonalFromRightScores","anyLegal","alert","completed_squares","legal","token","ReactDOM","render"],"mappings":"yxBAIMA,G,MAAYC,SAASC,eAAgB,UAwC5BC,E,kDApCX,WAAYC,GAAQ,IAAD,8BACf,cAAMA,IAIDC,GAAKJ,SAASK,cAAc,OALlB,E,gEAgBfN,EAAUO,YAAYC,KAAKH,M,6CAK3BL,EAAUS,YAAYD,KAAKH,M,+BAM3B,OAAOK,uBAEHF,KAAKJ,MAAMO,SAEXH,KAAKH,Q,GAhCGO,IAAMC,W,OCWpBC,EACF,WAAYC,EAAOC,GAAQ,oBACvBR,KAAKO,MAAQA,EACbP,KAAKQ,MAAQA,GAIfC,E,uKAEE,OAA+B,IAA3BT,KAAKJ,MAAMc,YACJ,KAGP,yBAAKC,UAAU,gBACX,yBAAKA,UAAU,iBAAf,gFAGA,yBAAKA,UAAW,kBACZ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,8BAAhB,KACA,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,8BAAhB,KACA,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,8BAAhB,KACA,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,gBAChB,yBAAKA,UAAW,mCAAhB,KACA,yBAAKA,UAAW,gBAChB,yBAAKA,UAAW,mCAAhB,KACA,yBAAKA,UAAW,uB,GAnDpBP,IAAMC,WA2DpBO,E,uKAEE,OAA+B,IAA3BZ,KAAKJ,MAAMc,YACJ,KAGP,yBAAKC,UAAU,gBACX,yBAAKA,UAAU,iBAAf,2FAGA,yBAAKA,UAAW,kBACZ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,cAAhB,MAEJ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,eAAhB,KACA,yBAAKA,UAAW,eAAhB,MAEJ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,gBAChB,yBAAKA,UAAW,mCAAhB,KACA,yBAAKA,UAAW,gBAChB,yBAAKA,UAAW,2BAAhB,KACA,yBAAKA,UAAW,uB,GAnDpBP,IAAMC,WA2DpBQ,E,uKAEE,OAA+B,IAA3Bb,KAAKJ,MAAMc,YACJ,KAGP,yBAAKC,UAAU,gBACX,yBAAKA,UAAU,iBAAf,wFAEA,yBAAKA,UAAW,kBACZ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,cAAhB,KACA,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,eAAhB,KACA,yBAAKA,UAAW,iBAChB,yBAAKA,UAAW,cAAhB,KACA,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,eAAhB,KACA,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,gBAChB,yBAAKA,UAAW,2BAAhB,KACA,yBAAKA,UAAW,gBAChB,yBAAKA,UAAW,2BAAhB,KACA,yBAAKA,UAAW,uB,GAlDpBP,IAAMC,WA0DpBS,E,uKAEE,OAA+B,IAA3Bd,KAAKJ,MAAMc,YACJ,KAGP,yBAAKC,UAAU,gBACX,yBAAKA,UAAU,iBAAf,+EAEA,yBAAKA,UAAW,kBACZ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,2BAAhB,MAEJ,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,2BAAhB,KACA,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,2BAAhB,KACA,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,4BAAhB,KACA,yBAAKA,UAAW,6BAAhB,KACA,yBAAKA,UAAW,6BAAhB,KACA,yBAAKA,UAAW,4BAAhB,KACA,yBAAKA,UAAW,YAEpB,yBAAKA,UAAW,aACZ,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,WAChB,yBAAKA,UAAW,mB,GA3CpBP,IAAMC,WAoD1B,SAASU,EAAenB,GACpB,OAAyB,IAAtBA,EAAMc,YAED,4BAAQM,QAASpB,EAAMqB,gBAAvB,YAGD,8BAGX,SAASC,EAAWtB,GAChB,OAAGA,EAAMc,YAAcd,EAAMuB,WAErB,4BAAQH,QAASpB,EAAMwB,YAAvB,QAGD,8BAGX,SAASC,EAASzB,GAEV,OAAIA,EAAM0B,UAEF,kBAAC,EAAD,KACI,yBAAKX,UAAU,SACX,yBAAKA,UAAU,YACf,kBAAC,EAAD,CACID,YAAed,EAAMc,cAEzB,kBAAC,EAAD,CACIA,YAAed,EAAMc,cAEzB,kBAAC,EAAD,CACIA,YAAed,EAAMc,cAEzB,kBAAC,EAAD,CACIA,YAAed,EAAMc,cAEzB,yBAAKC,UAAU,cACX,kBAACI,EAAD,CACIL,YAAad,EAAMc,YACnBO,eAAgBrB,EAAMqB,iBAE1B,6BAAMrB,EAAMc,YAAZ,IAvBL,GAwBK,kBAACQ,EAAD,CACIR,YAAad,EAAMc,YACnBS,WA1BT,EA2BSC,WAAYxB,EAAMwB,aAEtB,4BAAQJ,QAASpB,EAAM2B,YAAvB,YAOT,KAKnB,SAASC,EAAO5B,GACZ,IAAI6B,EAAY,SACZC,EAAS,KAWb,OAVI9B,EAAMW,OACNkB,GAAc,IAAM7B,EAAMW,MACN,SAAhBX,EAAMY,MACNkB,EAAS,IACc,WAAhB9B,EAAMY,QACbkB,EAAS,MAEN9B,EAAM+B,OAAS/B,EAAMgC,WAAahC,EAAMiC,WAAajC,EAAMkC,UAAUlC,EAAMiC,WAAWjC,EAAMgC,aACnGH,GAAc,IAAM7B,EAAMiC,UAAY,SAGtC,yBAAKlB,UAAWc,EACRM,WAAYnC,EAAMmC,WAClBC,OAAQpC,EAAMoC,QACjBN,G,IAKPO,E,2KAEWC,EAAKC,GACd,IACMC,EADUpC,KAAKJ,MAAMyC,QACJH,GAAKC,GAC5B,OACI,kBAAC,aAAD,CACIG,UAAU,QACVC,SAAU,CAAC,IAAML,EAAI,OAASC,GAC9BK,IAAKN,EAAM,IAAMC,GAErB,kBAACX,EAAD,CACIhB,MAAO4B,EAASA,EAAO5B,MAAQ,KAC/BD,MAAO6B,EAASA,EAAO7B,MAAQ,KAC/BiC,IAAKN,EAAM,IAAMC,EACjBD,IAAKA,EACLC,OAAQA,EACRL,UAAa9B,KAAKJ,MAAM6C,WAAWP,GAAKC,GACxCP,UAAa5B,KAAKJ,MAAMgC,UACxBC,UAAa7B,KAAKJ,MAAMiC,UACxBF,MAAO3B,KAAKJ,MAAM+B,W,sCAQ1B,IADA,IAAIe,EAAO,GACFR,EAAM,EAAGA,EAAMlC,KAAKJ,MAAM+C,SAAUT,IAAO,CAEhD,IADA,IAAIG,EAAU,GACLF,EAAS,EAAGA,EAASnC,KAAKJ,MAAM+C,SAAUR,IAC/CE,EAAQO,KAAK5C,KAAK6C,aAAaX,EAAKC,IAExCO,EAAKE,KAAK,yBAAKjC,UAAU,YAAY6B,IAAKN,GAAMG,IAEpD,OAAOK,I,+BAKP,OACI,6BACK1C,KAAK8C,qB,GA1CF1C,IAAMC,WAgDpB0C,E,kDACF,WAAYnD,GAAQ,IAAD,uBACf,cAAMA,IAoEVoD,eAAiB,SAACC,EAAGf,EAAKC,GACtBc,EAAEC,kBAtEa,EA6HnBC,gBAAkB,SAACF,EAAGzC,GAClB,IAAID,EAAS,EAAK6C,MAAMC,WAAa,OAAS,MAE9C,EAAKC,SAAS,CACVzB,UAAWtB,EACXqB,UAAWpB,KAlIA,EAsInB+C,cAAgB,SAACN,GACb,EAAKK,SAAS,CACVzB,UAAW,KACXD,UAAW,QAzIA,EA6InB4B,kBAAoB,SAACC,GACjB,IACMC,EADSD,EAAME,OACAC,QAErB,EAAKN,SAAS,CACV3B,MAAO+B,KAlJI,EAsJnBG,WAAa,SAACJ,GACV,IAAIK,EAAU,EAAKV,MAAMU,QACnBC,EAAiBD,EAAQzB,QAAQ2B,OAAS,EAAIF,EAAQzB,QAAQ4B,MAAM,GAAG,GAAKH,EAAQzB,QAAQ4B,QAC5FC,EAAoBJ,EAAQrB,WAAWuB,OAAQ,EAAIF,EAAQrB,WAAWwB,MAAM,GAAG,GAAKH,EAAQrB,WAAWwB,QAC7GH,EAAQzB,QAAU0B,EAClBD,EAAQrB,WAAayB,EACrB,IAAMb,IAAaS,EAAQzB,QAAQ2B,OAAS,KAAM,EAAKZ,MAAMC,WAElD5D,SAAS0E,qBAAqB,QAAQ,GAC5CC,MAAMC,YAAY,iBAAmBhB,EAAa,oBAAsB,oBAE7E,EAAKC,SAAS,CACNQ,QAASA,EACTT,WAAYA,KAnKL,EAwKnBiB,cAAgB,SAACb,GACb,IAAIK,EAAU,EAAKV,MAAMU,QACnBC,EAAiBD,EAAQzB,QAAQ4B,MAAM,EAAE,GACzCC,EAAoBJ,EAAQrB,WAAWwB,MAAM,EAAE,GACrDH,EAAQzB,QAAU0B,EAClBD,EAAQrB,WAAayB,EACVzE,SAAS0E,qBAAqB,QAAQ,GAC5CC,MAAMC,YAAY,iBAAkB,qBACzC,EAAKf,SAAS,CACNQ,QAASA,EACTT,YAAY,EACZxB,UAAW,KACXD,UAAW,QAhLnB,IAFA,IACIa,EAAa,GACR8B,EAAW,EAAGA,EAFR,EAE6BA,IAAY,CAEpD,IADA,IAAIrC,EAAM,GACDsC,EAAc,EAAGA,EAJf,EAIuCA,IAC9CtC,EAAIU,KAAK,CACL,IAAO,CACH,MAAQ,EACR,QAAW,GAEf,KAAQ,CACJ,MAAQ,EACR,QAAW,KAIvBH,EAAWG,KAAKV,GAlBL,OAoBf,EAAKkB,MAAQ,CACTT,SAnBW,EAoBXmB,QAAS,CACLzB,QAAS,CAACoC,MAAMC,KAAK,CAACV,OArBf,IAqBkC,SAAAf,GAAC,OAAIwB,MArBvC,GAqBuDE,KAAK,UACnElC,WAAY,CAACA,IAGjBY,YAAY,EACZ1B,OAAO,EACPE,UAAW,KACXD,UAAW,KACXN,WAAW,EACXZ,YAAa,GAGjB,EAAKkE,WAAa,EAAKA,WAAWC,KAAhB,gBAClB,EAAKtD,WAAa,EAAKA,WAAWsD,KAAhB,gBAClB,EAAK5D,eAAiB,EAAKA,eAAe4D,KAApB,gBACtB,EAAKzD,WAAa,EAAKA,WAAWyD,KAAhB,gBAClB,EAAKrB,kBAAoB,EAAKA,kBAAkBqB,KAAvB,gBACzB,EAAKP,cAAgB,EAAKA,cAAcO,KAAnB,gBAxCN,E,yDA+Cf7E,KAAKsD,SAAS,CAAChC,WAAW,M,mCAI1BtB,KAAKsD,SAAS,CACVhC,WAAW,EACXwD,YAAa,M,uCAKjB,IAAIpE,EAAcV,KAAKoD,MAAM1C,YAC7BA,GAA6B,EAC7BV,KAAKsD,SAAS,CAAC5C,YAAaA,M,mCAI5B,IAAIA,EAAcV,KAAKoD,MAAM1C,YAC7BA,GAA6B,EAC7BV,KAAKsD,SAAS,CAAC5C,YAAaA,M,iCAOrBuC,GACP,IAAMf,EAAMe,EAAEV,SAASL,IACjBC,EAASc,EAAEV,SAASJ,OACtB3B,EAAQyC,EAAE8B,SAASvE,MACnBsD,EAAU9D,KAAKoD,MAAMU,QACnBC,EAAiBD,EAAQzB,QAAQ4B,QACnC5B,EAAU0B,EAAeA,EAAeC,OAAS,GAAGgB,KAAI,SAAAC,GAAM,OAAOA,EAAEhB,WACvE1D,EAASP,KAAKoD,MAAMC,WAAa,OAAS,MAC1C6B,EAA2B,SAAV1E,EAAmB,SAAW,OAC/C2E,EAAiBnF,KAAKoD,MAAMC,WAAa,MAAQ,OAG/Ca,EAAoBJ,EAAQrB,WAAWwB,QACzCxB,EAAa2C,KAAKC,MAAMD,KAAKE,UAAUpB,EAAkBA,EAAkBF,OAAS,KAExF,GAAMvB,EAAWP,GAAKC,GAAQ5B,GAAOC,GAArC,CAMA,IADA,IAAMmC,EAAW3C,KAAKoD,MAAMT,SACnB4C,EAAarD,EAAI,EAAGqD,GAAcrD,EAAI,EAAGqD,IAC9C,IAAK,IAAIC,EAAgBrD,EAAO,EAAGqD,GAAiBrD,EAAO,EAAGqD,IACtDD,IAAerD,GAAOsD,IAAkBrD,IACxCM,EAAW8C,GAAYC,GAAeL,GAAe3E,IAAS,EAC9DiC,EAAW8C,GAAYC,GAAeL,GAAeD,IAAiB,EACtEzC,EAAW8C,GAAYC,GAAejF,GAAO2E,IAAiB,EAC9DzC,EAAW8C,GAAYC,GAAejF,GAAOC,IAAS,GAEtD+E,GAAa,GAAKC,GAAgB,GAAKD,EAAa5C,GAAY6C,EAAgB7C,IAChFF,EAAW8C,GAAYC,GAAeL,GAAe3E,IAAS,GAM1E6B,EAAQH,GAAKC,GAAU,IAAI7B,EAAMC,EAAOC,GAG7Bf,SAAS0E,qBAAqB,QAAQ,GAC5CC,MAAMC,YAAY,iBAAmBrE,KAAKoD,MAAMC,WAAa,mBAAqB,qBACvFS,EAAQzB,QAAU0B,EAAe0B,OAAO,CAACpD,IACzCyB,EAAQrB,WAAayB,EAAkBuB,OAAO,CAAChD,IAC/CzC,KAAKsD,SAAS,CACVQ,QAASA,EACTT,YAAarD,KAAKoD,MAAMC,WAExBxB,UAAW,KACXD,UAAW,U,+BAiET,IAAD,OACCkC,EAAU9D,KAAKoD,MAAMU,QAErBC,EAAiBD,EAAQzB,QAAQ4B,QACnC5B,EAAU0B,EAAeA,EAAeC,OAAS,GAAGC,QAElDC,EAAoBJ,EAAQrB,WAAWwB,QACzCxB,EAAayB,EAAkBA,EAAkBF,OAAS,GAAGC,QAGjE5B,EAAUqD,EAAerD,EAAQI,GAG7BkD,EAAUlD,KACVJ,EAAUuD,EAAgBvD,EAASI,IAIvC,IAAMoD,EAAQC,EAAezD,GACvB0D,EAAWF,EAAMG,IACjBC,EAAYJ,EAAMK,KAQxB,OACI,yBAAKvF,UAAU,QACX,yBAAKA,UAAU,SACX,iDACA,kDACA,uDAEJ,yBAAKA,UAAU,cACX,kBAAC,EAAD,CACI0B,QAASA,EACTM,SAAU3C,KAAKoD,MAAMT,SACrBF,WAAYA,EACZb,UAAW5B,KAAKoD,MAAMxB,UACtBC,UAAW7B,KAAKoD,MAAMvB,UACtBF,MAAO3B,KAAKoD,MAAMzB,SAG1B,yBAAKhB,UAAU,cACX,kBAAC,oBAAD,CACI2B,UAAU,QACVyC,SAAU,CAACvE,MAAM,QACjBwB,OAAQ,SAACiB,GAAD,OAAO,EAAKkD,WAAWlD,IAC/BmD,YAAa,SAACnD,GAAD,OAAO,EAAKE,gBAAgBF,EAAG,UAE5C,yBAAKtC,UAAU,QACV0F,YAAa,SAACpD,GAAD,OAAO,EAAKE,gBAAgBF,EAAG,SAC5CqD,UAAW,SAACrD,GAAD,OAAO,EAAKM,cAAcN,KAF1C,MAMJ,kBAAC,oBAAD,CACIX,UAAU,QACVyC,SAAU,CAACvE,MAAM,UACjBwB,OAAQ,SAACiB,GAAD,OAAO,EAAKkD,WAAWlD,IAC/BmD,YAAa,SAACnD,GAAD,OAAO,EAAKE,gBAAgBF,EAAG,YAE5C,yBAAKtC,UAAU,QACV0F,YAAa,SAACpD,GAAD,OAAO,EAAKE,gBAAgBF,EAAG,WAC5CqD,UAAW,SAACrD,GAAD,OAAO,EAAKM,cAAcN,KAF1C,OAQR,yBAAKtC,UAAU,SAAf,SAEI,yBAAKA,UAAU,aACVoF,GAEL,yBAAKpF,UAAU,cACVsF,IAGT,yBAAKtF,UAAU,YACX,2BAAOA,UAAW,SAAlB,QAEI,2BACI4F,KAAK,QACLC,KAAK,WACL5C,QAAS5D,KAAKoD,MAAMzB,MACpB8E,SAAUzG,KAAKwD,qBAEvB,4BAAQxC,QAAShB,KAAK6D,YAAtB,QACA,4BAAQ7C,QAAShB,KAAKsE,eAAtB,OACA,4BAAQtD,QAAShB,KAAK4E,YAAtB,UAEJ,yBAAKjE,UAAU,YACX,kBAACU,EAAD,CACIC,UAAWtB,KAAKoD,MAAM9B,UACtBZ,YAAaV,KAAKoD,MAAM1C,YACxBa,WAAYvB,KAAKuB,WACjBN,eAAgBjB,KAAKiB,eACrBG,WAAYpB,KAAKoB,mB,GA/RtBhB,IAAMC,WAgTlB,SAASqG,EAAyBC,GACrC,IAAIC,EAAS,CACT,IAAQ,EACR,KAAQ,GAGZ,IAAK,IAAI1E,KAAOyE,EACZ,IAAK,IAAIxE,EAAS,EAAGA,EAASwE,EAAK,GAAG3C,OAAS,EAAG7B,IAAW,CACzD,IAAI0E,EAAQF,EAAKzE,GAAKC,GAClB2E,EAASH,EAAKzE,GAAKC,EAAS,GAC5B4E,EAAQJ,EAAKzE,GAAKC,EAAS,GAC3B0E,GAASC,GAAUC,GACfF,EAAMtG,QAAUuG,EAAOvG,OAASsG,EAAMtG,QAAUwG,EAAMxG,QACtDqG,EAAOC,EAAMtG,QAAU,GAMvC,OAAOqG,EAGJ,SAASI,EAAuBL,GASnC,OAAOD,EAPQC,EAAK,GAAG3B,KAAI,SAASiC,EAAKC,GACrC,OAAOP,EAAK3B,KAAI,SAAS9C,GACrB,OAAOA,EAAIgF,UAShB,SAASC,EAA0BR,GAYtC,IAAIS,EAAY,GAChB,IAAK,IAAIlF,KAAOyE,EAAM,CAClB,IAAIU,EAAU5C,MAAMkC,EAAKzE,GAAK8B,OAAS,EAAI9B,GAAKyC,KAAK,MACjD2C,EAAS7C,MAAM8C,SAASrF,IAAMyC,KAAK,MACnC6C,EAASH,EAAQ5B,OAAOkB,EAAKzE,GAAKuD,OAAO6B,IAC7CF,EAAUxE,KAAK4E,GAgBnB,OALuBJ,EAAU,GAAGpC,KAAI,SAASiC,EAAKC,GAClD,OAAOE,EAAUpC,KAAI,SAAS9C,GAC1B,OAAOA,EAAIgF,SAMhB,SAASO,EAA2Bd,GAYvC,IAAIe,EAAa,GACjB,IAAK,IAAIxF,KAAOyE,EAAM,CAClB,IAAIU,EAAU5C,MAAM8C,SAASrF,IAAMyC,KAAK,MACpC2C,EAAS7C,MAAMkC,EAAKzE,GAAK8B,OAAS,EAAI9B,GAAKyC,KAAK,MAChD6C,EAASH,EAAQ5B,OAAOkB,EAAKzE,GAAKuD,OAAO6B,IAC7CI,EAAW9E,KAAK4E,GAgBpB,OALwBE,EAAW,GAAG1C,KAAI,SAASiC,EAAKC,GACpD,OAAOQ,EAAW1C,KAAI,SAAS9C,GAC3B,OAAOA,EAAIgF,SAMhB,SAASS,EAA+BhB,GAE3C,OAAOD,EADgBS,EAA0BR,IAI9C,SAASiB,EAAgCjB,GAE5C,OAAOD,EADiBe,EAA2Bd,IAIhD,SAASb,EAAezD,GAE3B,IAAIwF,EAAmBnB,EAAyBrE,GAC5CyF,EAAiBd,EAAuB3E,GACxC0F,EAAyBJ,EAA+BtF,GACxD2F,EAA0BJ,EAAgCvF,GAE1DuE,EAAS,CACT,IAAQ,EACR,KAAQ,GAGZ,IAAK,IAAIpE,KAAOoE,EACZA,EAAOpE,GACHqF,EAAiBrF,GACfsF,EAAetF,GACfuF,EAAuBvF,GACvBwF,EAAwBxF,GAGlC,OAAOoE,EAGJ,SAASjB,EAAUlD,GACtB,IADkC,EAC9BwF,EAAW,CACX,KAAO,EACP,MAAQ,GAHsB,cAKlBxF,GALkB,IAKlC,2BAA4B,CAAC,IAAD,EAAnBP,EAAmB,sBACLA,GADK,IACxB,2BAAwB,CAAC,IAAhBE,EAAe,QACpB,IAAK,IAAII,KAAOyF,EACPA,EAASzF,KAASJ,EAAOI,GAAP,OAAuBJ,EAAOI,GAAP,SAC1CyF,EAASzF,IAAO,IAJJ,gCALM,8BAelC,QAASyF,EAAQ,KAAWA,EAAQ,MAGjC,SAASrC,EAAgBvD,EAASI,GACrCyF,MAAM,sFAEN,IAAIC,EAAoB9F,EAAQ4B,QAChC,IAAK,IAAIM,KAAY4D,EACjB,IAAK,IAAI3D,KAAe2D,EAAkB5D,GAEtC,IAAK4D,EAAkB5D,GAAUC,GAAc,CAC3C,IAAI1C,EAAYW,EAAW8B,GAAUC,IACjC1C,EAAS,IAAT,MAA4BA,EAAS,IAAT,UAC5BqG,EAAkB5D,GAAUC,GAAe,IAAIlE,EAAM,MAAO,UAE5DwB,EAAS,KAAT,MAA6BA,EAAS,KAAT,UAC7BqG,EAAkB5D,GAAUC,GAAe,IAAIlE,EAAM,OAAQ,SAK7E,OAAO6H,EAGJ,SAASzC,EAAerD,EAASI,GACpC,IAAK,IAAI8B,KAAYlC,EACjB,IAAK,IAAImC,KAAenC,EAAQkC,GAAW,CACvC,IAAInC,EAASC,EAAQkC,GAAUC,GAC3B4D,EAAQ3F,EAAW8B,GAAUC,GACjC,IAAKpC,IAAWgG,EAAK,IAAL,SAA2BA,EAAK,IAAL,OAAyBA,EAAK,KAAL,SAA4BA,EAAK,KAAL,KAAuB,CACnH,IAAIC,EAAQ,IAAI/H,EAAM,QAAS,QAC/B+B,EAAQkC,GAAUC,GAAe6D,GAI7C,OAAOhG,EAnMXiG,IAASC,OACJ,kBAAC,EAAD,MACD9I,SAASC,eAAe,SAAWD,SAASK,cAAc,U","file":"static/js/main.9792c016.chunk.js","sourcesContent":["// Modal.js\nimport React from 'react';\nimport { createPortal } from 'react-dom';\n// We get hold of the div with the id modal that we have created in index.html\nconst modalRoot = document.getElementById( 'modal' );\n\n\nclass Modal extends React.Component {\n    constructor(props) {\n        super(props);\n        // Create a div that we'll render the modal into. Because each\n        // Modal component has its own element, we can render multiple\n        // modal components into the modal container.\n        this.el = document.createElement('div');\n\n\n    }\n\n\n\n\n    componentDidMount() {\n        // Append the element into the DOM on mount. We'll render\n        // into the modal container element (see the HTML tab).\n        modalRoot.appendChild(this.el);\n    }\n\n    componentWillUnmount() {\n        // Remove the element from the DOM when we unmount\n        modalRoot.removeChild(this.el);\n    }\n\n\n    render() {\n        // Use a portal to render the children into the element\n        return createPortal(\n            // Any valid React child: JSX, strings, arrays, etc.\n            this.props.children,\n            // A DOM element\n            this.el,\n        );\n    }\n}\n\nexport default Modal;\n\n\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Modal from './modal';\nimport { DragDropContainer, DropTarget } from 'react-drag-drop-container';\n\n// remove react cruft\n// rough clean of rules\n// tutorial in separate file?\n// tutorial\n// accessibility, mobile, style checks\n// const vs let -- can make const squares, then do squares[i] = x, so not const?? can't do squares =x though\n// add tests for react components and interactivity\n// allow grid size to be set\n// bomb\n// add islands\n// auto play?\n\nclass Token {\n    constructor(color, shape) {\n        this.color = color;\n        this.shape = shape;\n    }\n}\n\nclass Step1 extends React.Component {\n    render() {\n        if (this.props.currentRule !== 1) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                <div className=\"tutorial-text\">\n                Players take turns dragging a symbol (X or O) of their color onto the board.\n                </div>\n                <div className={\"tutorial-board\"}>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square tutorial1animation4\"}>O</div>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square tutorial1animation3\"}>X</div>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square tutorial1animation5\"}>O</div>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square tray\"}/>\n                        <div className={\"square tray tutorial1animationX\"}>X</div>\n                        <div className={\"square tray\"}/>\n                        <div className={\"square tray tutorial1animationO\"}>O</div>\n                        <div className={\"square tray\"}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass Step2 extends React.Component {\n    render() {\n        if (this.props.currentRule !== 2) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                <div className=\"tutorial-text\">\n                    Matching symbols of opposite color cannot be placed adjacent or diagonal to each other.\n                </div>\n                <div className={\"tutorial-board\"}>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square red\"}>O</div>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square blue\"}>X</div>\n                        <div className={\"square blue\"}>X</div>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square tray\"}/>\n                        <div className={\"square tray tutorial2animationX\"}>X</div>\n                        <div className={\"square tray\"}/>\n                        <div className={\"square tray tutorial2_O\"}>O</div>\n                        <div className={\"square tray\"}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass Step3 extends React.Component {\n    render() {\n        if (this.props.currentRule !== 3) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                <div className=\"tutorial-text\">\n                    When no symbol can be placed in a square, the square is blacked out.                </div>\n                <div className={\"tutorial-board\"}>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square red\"}>X</div>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square blue\"}>O</div>\n                        <div className={\"square black\"}/>\n                        <div className={\"square red\"}>O</div>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square blue\"}>X</div>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square tray\"}/>\n                        <div className={\"square tray tutorial2_O\"}>X</div>\n                        <div className={\"square tray\"}/>\n                        <div className={\"square tray tutorial2_O\"}>O</div>\n                        <div className={\"square tray\"}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nclass Step4 extends React.Component {\n    render() {\n        if (this.props.currentRule !== 4) {\n            return null\n        }\n        return(\n            <div className=\"tutorialStep\">\n                <div className=\"tutorial-text\">\n                    Score a point by getting a 3-in-a-row of your color (symbol doesn't matter).\n                <div className={\"tutorial-board\"}>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square red step4_score3\"}>O</div>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square red step4_score3\"}>X</div>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square red step4_score3\"}>O</div>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square blue step4_score1\"}>O</div>\n                        <div className={\"square blue step4_score12\"}>X</div>\n                        <div className={\"square blue step4_score12\"}>X</div>\n                        <div className={\"square blue step4_score2\"}>X</div>\n                        <div className={\"square\"}/>\n                    </div>\n                    <div className={\"board-row\"}>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                        <div className={\"square\"}/>\n                    </div>\n                </div>\n            </div>\n            </div>\n        )\n    }\n}\n\nfunction PreviousButton(props) {\n    if(props.currentRule !== 1) {\n        return (\n            <button onClick={props.handlePrevious}>Previous</button>\n        )\n    }\n    return <div/>;\n}\n\nfunction NextButton(props) {\n    if(props.currentRule < props.totalSteps) {\n        return (\n            <button onClick={props.handleNext}>Next</button>\n        )\n    }\n    return <div/>;\n}\n\nfunction Tutorial(props) {\n    const totalSteps = 4;\n        if (props.showRules) {\n            return (\n                <Modal>\n                    <div className=\"modal\">\n                        <div className=\"tutorial\">\n                        <Step1\n                            currentRule = {props.currentRule}\n                        />\n                        <Step2\n                            currentRule = {props.currentRule}\n                        />\n                        <Step3\n                            currentRule = {props.currentRule}\n                        />\n                        <Step4\n                            currentRule = {props.currentRule}\n                        />\n                        <div className=\"navigation\">\n                            <PreviousButton\n                                currentRule={props.currentRule}\n                                handlePrevious={props.handlePrevious}\n                            />\n                            <div>{props.currentRule}/{totalSteps}</div>\n                            <NextButton\n                                currentRule={props.currentRule}\n                                totalSteps={totalSteps}\n                                handleNext={props.handleNext}\n                            />\n                            <button onClick={props.handleHide}>Exit</button>\n                        </div>\n                        </div>\n                    </div>\n                </Modal>\n            );\n        } else {\n            return null;\n    }\n\n}\n\nfunction Square(props) {\n    let tokenName = \"square\";\n    let symbol = null;\n    if (props.color) {\n        tokenName += (\" \" + props.color);\n        if (props.shape === 'star') {\n            symbol = 'X';\n        } else if (props.shape === 'circle') {\n            symbol = 'O';\n        }\n    } else if (props.hints && props.hintShape && props.hintColor && props.legalMove[props.hintColor][props.hintShape]) {\n        tokenName += (\" \" + props.hintColor + \" hint\")\n    }\n    return (\n        <div className={tokenName}\n                onDragOver={props.onDragOver}\n                onDrop={props.onDrop}>\n            {symbol}\n        </div>\n    );\n}\n\nclass Board extends React.Component {\n\n    renderSquare(row, column) {\n        const squares = this.props.squares;\n        const square = squares[row][column];\n        return (\n            <DropTarget\n                targetKey=\"token\"\n                dropData={{'row':row,'column':column}}\n                key={row + ',' + column}\n            >\n            <Square\n                shape={square ? square.shape : null}\n                color={square ? square.color : null}\n                key={row + ',' + column}\n                row={row}\n                column={column}\n                legalMove = {this.props.legalMoves[row][column]}\n                hintShape = {this.props.hintShape}\n                hintColor = {this.props.hintColor}\n                hints={this.props.hints}\n            />\n            </DropTarget>\n        );\n    }\n\n    createSquares() {\n        let rows = [];\n        for (let row = 0; row < this.props.gridSize; row++) {\n            let squares = [];\n            for (let column = 0; column < this.props.gridSize; column++) {\n                squares.push(this.renderSquare(row, column));\n            }\n            rows.push(<div className=\"board-row\" key={row}>{squares}</div>);\n        }\n        return rows;\n    }\n\n\n    render() {\n        return (\n            <div>\n                {this.createSquares()}\n            </div>\n        );\n    }\n}\n\nclass Game extends React.Component {\n    constructor(props) {\n        super(props);\n        let gridSize = 5;\n        let legalMoves = [];\n        for (let rowIndex = 0; rowIndex < gridSize; rowIndex++) {\n            let row = [];\n            for (let columnIndex = 0; columnIndex < gridSize; columnIndex++) {\n                row.push({\n                    'red': {\n                        'star': true,\n                        'circle' : true\n                    },\n                    'blue': {\n                        'star': true,\n                        'circle' : true\n                    }\n                });\n            }\n            legalMoves.push(row);\n        };\n        this.state = {\n            gridSize: gridSize,\n            history: {\n                squares: [Array.from({length: gridSize}, e => Array(gridSize).fill(null))],\n                legalMoves: [legalMoves]\n            },\n            // legalMoves: legalMoves,\n            blueIsNext: true,\n            hints: true,\n            hintColor: null,\n            hintShape: null,\n            showRules: false,\n            currentRule: 1,\n        };\n        // todo understand when need to bind\n        this.handleShow = this.handleShow.bind(this);\n        this.handleHide = this.handleHide.bind(this);\n        this.handlePrevious = this.handlePrevious.bind(this);\n        this.handleNext = this.handleNext.bind(this);\n        this.handleHintsChange = this.handleHintsChange.bind(this);\n        this.handleNewGame = this.handleNewGame.bind(this);\n\n    }\n\n\n\n    handleShow() {\n        this.setState({showRules: true});\n    }\n\n    handleHide() {\n        this.setState({\n            showRules: false,\n            currentStep: 1\n        });\n    }\n\n    handlePrevious() {\n        let currentRule = this.state.currentRule\n        currentRule =  currentRule - 1;\n        this.setState({currentRule: currentRule});\n    }\n\n    handleNext() {\n        let currentRule = this.state.currentRule;\n        currentRule =  currentRule + 1;\n        this.setState({currentRule: currentRule});\n    }\n\n    handleDragOver = (e, row, column) => {\n        e.preventDefault();\n    }\n\n    handleDrop(e) {\n        const row = e.dropData.row;\n        const column = e.dropData.column;\n        let shape = e.dragData.shape;\n        let history = this.state.history;\n        const squaresHistory = history.squares.slice();\n        let squares = squaresHistory[squaresHistory.length - 1].map(a => {return a.slice()})\n        let color = (this.state.blueIsNext ? \"blue\" : \"red\");\n        let converseShape = (shape === \"star\" ? \"circle\" : \"star\");\n        let converseColor = (this.state.blueIsNext ? \"red\" : \"blue\");\n\n        // If the selected symbol cannot be legally placed in the square, don't allow it\n        const legalMovesHistory = history.legalMoves.slice();\n        let legalMoves = JSON.parse(JSON.stringify(legalMovesHistory[legalMovesHistory.length - 1]))\n\n        if (!(legalMoves[row][column][color][shape])){\n            return;\n        }\n\n        // Update the legal moves (red circle can't be next to blue circle, red star can't be next to blue star)\n        const gridSize = this.state.gridSize;\n        for (let currentRow = row-1; currentRow <= row+1; currentRow++) {\n            for (let currentColumn = column-1; currentColumn <= column+1; currentColumn++) {\n                if (currentRow === row && currentColumn === column) {\n                    legalMoves[currentRow][currentColumn][converseColor][shape] = false;\n                    legalMoves[currentRow][currentColumn][converseColor][converseShape] = false;\n                    legalMoves[currentRow][currentColumn][color][converseShape] = false;\n                    legalMoves[currentRow][currentColumn][color][shape] = false;\n                }\n                if (currentRow >=0 && currentColumn >=0 && currentRow < gridSize && currentColumn < gridSize) {\n                    legalMoves[currentRow][currentColumn][converseColor][shape] = false;\n                }\n            }\n        }\n\n        // Put a token in the square where the token was dropped\n        squares[row][column] = new Token(color, shape);\n\n        // update next player color\n        let body = document.getElementsByTagName(\"body\")[0];\n        body.style.setProperty(\"--player_color\", (this.state.blueIsNext ? \"var(--red_color)\" : \"var(--blue_color)\"));\n        history.squares = squaresHistory.concat([squares])\n        history.legalMoves = legalMovesHistory.concat([legalMoves])\n        this.setState({\n            history: history,\n            blueIsNext: !this.state.blueIsNext,\n            // legalMoves: legalMoves,\n            hintColor: null,\n            hintShape: null,\n        });\n    }\n\n    handleMouseDown = (e, shape) => {\n        let color = (this.state.blueIsNext ? \"blue\" : \"red\");\n\n        this.setState({\n            hintColor: color,\n            hintShape: shape,\n        });\n    }\n\n    handleMouseUp = (e) => {\n        this.setState({\n            hintColor: null,\n            hintShape: null,\n        });\n    }\n\n    handleHintsChange = (event) => {\n        const target = event.target;\n        const value = target.checked;\n\n        this.setState({\n            hints: value\n        });\n    }\n\n    handleUndo = (event) => {\n        let history = this.state.history;\n        const squaresHistory = history.squares.length > 1 ? history.squares.slice(0,-1) : history.squares.slice();\n        const legalMovesHistory = history.legalMoves.length >1 ? history.legalMoves.slice(0,-1) : history.legalMoves.slice();\n        history.squares = squaresHistory;\n        history.legalMoves = legalMovesHistory\n        const blueIsNext = history.squares.length > 1 ? !(this.state.blueIsNext) : true;\n        // todo duplicated so put in function?\n        let body = document.getElementsByTagName(\"body\")[0];\n        body.style.setProperty(\"--player_color\", (blueIsNext ? \"var(--blue_color)\" : \"var(--red_color)\"));\n\n        this.setState({\n                history: history,\n                blueIsNext: blueIsNext,\n            }\n        )\n    }\n\n    handleNewGame = (event) => {\n        let history = this.state.history;\n        const squaresHistory = history.squares.slice(0,1);\n        const legalMovesHistory = history.legalMoves.slice(0,1);\n        history.squares = squaresHistory;\n        history.legalMoves = legalMovesHistory\n        let body = document.getElementsByTagName(\"body\")[0];\n        body.style.setProperty(\"--player_color\", \"var(--blue_color)\");\n        this.setState({\n                history: history,\n                blueIsNext: true,\n                hintColor: null,\n                hintShape: null,\n            }\n        )\n    }\n\n\n    render() {\n        const history = this.state.history;\n\n        const squaresHistory = history.squares.slice();\n        let squares = squaresHistory[squaresHistory.length - 1].slice();\n        // const legalMoves = this.state.legalMoves.slice();\n        const legalMovesHistory = history.legalMoves.slice();\n        let legalMoves = legalMovesHistory[legalMovesHistory.length - 1].slice();\n\n        // Black out any squares that nothing can be placed in\n        squares = updateBlackout(squares,legalMoves);\n\n        // If one or both players has no more legal moves, fill in the remaining squares\n        if (isEndgame(legalMoves)) {\n            squares = completeEndgame(squares, legalMoves);\n        }\n\n        // Calculate the score\n        const score = calculateScore(squares);\n        const redScore = score.red;\n        const blueScore = score.blue;\n\n        // If all squares are filled, game over\n        // let status = null;\n        // if (allSquaresFilled) {\n        //     status = \"r\"\n        // }\n\n        return (\n            <div className=\"game\">\n                <div className=\"title\">\n                    <h1>Stars and Circles</h1>\n                    <h2>Game by Colin Thom</h2>\n                    <h2>Built by Sarah Edwards</h2>\n                </div>\n                <div className=\"game-board\">\n                    <Board\n                        squares={squares}\n                        gridSize={this.state.gridSize}\n                        legalMoves={legalMoves}\n                        hintShape={this.state.hintShape}\n                        hintColor={this.state.hintColor}\n                        hints={this.state.hints}\n                    />\n                </div>\n                <div className=\"token-area\">\n                    <DragDropContainer\n                        targetKey=\"token\"\n                        dragData={{shape:'star'}}\n                        onDrop={(e) => this.handleDrop(e)}\n                        onDragStart={(e) => this.handleMouseDown(e, \"star\")}\n                    >\n                        <div className=\"token\"\n                             onMouseDown={(e) => this.handleMouseDown(e, \"star\")}\n                             onMouseUp={(e) => this.handleMouseUp(e)}\n                        >X\n                        </div>\n                    </DragDropContainer>\n                    <DragDropContainer\n                        targetKey=\"token\"\n                        dragData={{shape:'circle'}}\n                        onDrop={(e) => this.handleDrop(e)}\n                        onDragStart={(e) => this.handleMouseDown(e, \"circle\")}\n                    >\n                        <div className=\"token\"\n                             onMouseDown={(e) => this.handleMouseDown(e, \"circle\")}\n                             onMouseUp={(e) => this.handleMouseUp(e)}\n                        >O\n                        </div>\n                    </DragDropContainer>\n\n                </div>\n                <div className=\"score\">\n                    Score:\n                    <div className=\"red-score\">\n                        {redScore}\n                    </div>\n                    <div className=\"blue-score\">\n                        {blueScore}\n                    </div>\n                </div>\n                <div className=\"controls\">\n                    <label className={\"hints\"}>\n                        Hints\n                        <input\n                            name=\"hints\"\n                            type=\"checkbox\"\n                            checked={this.state.hints}\n                            onChange={this.handleHintsChange} />\n                    </label>\n                    <button onClick={this.handleUndo}>Undo</button>\n                    <button onClick={this.handleNewGame}>New</button>\n                    <button onClick={this.handleShow}>Rules</button>\n                </div>\n                <div className=\"tutorial\">\n                    <Tutorial\n                        showRules={this.state.showRules}\n                        currentRule={this.state.currentRule}\n                        handleHide={this.handleHide}\n                        handlePrevious={this.handlePrevious}\n                        handleNext={this.handleNext}\n                    />\n                </div>\n\n            </div>\n        );\n    }\n}\n\n// ========================================\n\n// ReactDOM.render(<Game />, document.getElementById(\"root\"));\nReactDOM.render(\n    (<Game />),\n    document.getElementById('root') || document.createElement('div') // for testing purposes\n);\n\nexport function calculateHorizontalScore(grid) {\n    let scores = {\n        'red' : 0,\n        'blue': 0\n    };\n\n    for (let row in grid) {\n        for (let column = 0; column < grid[0].length - 2; column ++) {\n            let first = grid[row][column];\n            let second = grid[row][column + 1];\n            let third = grid[row][column + 2];\n            if (first && second && third) {\n                if (first.color === second.color && first.color === third.color) {\n                    scores[first.color] += 1;\n                }\n            }\n        }\n    }\n\n    return scores\n}\n\nexport function calculateVerticalScore(grid) {\n    // transpose the grid\n    let vertical = grid[0].map(function(col, i){\n        return grid.map(function(row){\n            return row[i];\n        });\n    });\n\n    // Calculate the transposed grid score\n    return calculateHorizontalScore(vertical)\n\n}\n\nexport function transposeDiagonalFromLeft(grid) {\n    // Shift the grid so that the diagonals from upper left to lower right are aligned vertically\n    // Pad the grid with nulls to maintain equal length of each row\n    // [\n    //     [0,1,2],\n    //     [3,4,5],\n    //     [6,7,8]\n    // ] becomes [\n    //   [ N, N, 0, 1, 2 ],\n    //   [ N, 3, 4, 5, N ],\n    //   [ 6, 7, 8, N, N ]\n    // ] where N is null\n    let leftShift = [];\n    for (let row in grid) {\n        let prepend = Array(grid[row].length - 1 - row).fill(null);\n        let append = Array(parseInt(row)).fill(null);\n        let newRow = prepend.concat(grid[row].concat(append));\n        leftShift.push(newRow);\n    }\n\n    // Transpose the grid so that the verticals become the horizontals\n    // [\n    //     [ N, N, 6 ],\n    //     [ N, 3, 7 ],\n    //     [ 0, 4, 8 ],\n    //     [ 1, 5, N ],\n    //     [ 2, N, N ]\n    //   ]\n    let diagonalFromLeft = leftShift[0].map(function(col, i){\n        return leftShift.map(function(row){\n            return row[i];\n        });\n    });\n    return diagonalFromLeft\n}\n\nexport function transposeDiagonalFromRight(grid) {\n    // Shift the grid so that the diagonals from upper right to lower left are aligned vertically\n    // Pad the grid with nulls to maintain equal length of each row\n    // [\n    //     [0,1,2],\n    //     [3,4,5],\n    //     [6,7,8]\n    // ] becomes [\n    //   [ 0, 1, 2, N, N],\n    //   [ N, 3, 4, 5, N],\n    //   [ N, N, 6, 7, 8 ]\n    // ] where N is null\n    let rightShift = [];\n    for (let row in grid) {\n        let prepend = Array(parseInt(row)).fill(null);\n        let append = Array(grid[row].length - 1 - row).fill(null);\n        let newRow = prepend.concat(grid[row].concat(append));\n        rightShift.push(newRow);\n    };\n\n    // Transpose the grid so that the verticals become the horizontals\n    // [\n    //     [ N, N, 6 ],\n    //     [ N, 3, 7 ],\n    //     [ 0, 4, 8 ],\n    //     [ 1, 5, N ],\n    //     [ 2, N, N ]\n    //   ]\n    let diagonalFromRight = rightShift[0].map(function(col, i){\n        return rightShift.map(function(row){\n            return row[i];\n        });\n    });\n    return diagonalFromRight\n}\n\nexport function calculateDiagonalFromLeftScore(grid) {\n    let diagonalFromLeft = transposeDiagonalFromLeft(grid);\n    return calculateHorizontalScore(diagonalFromLeft)\n}\n\nexport function calculateDiagonalFromRightScore(grid) {\n    let diagonalFromRight = transposeDiagonalFromRight(grid);\n    return calculateHorizontalScore(diagonalFromRight)\n}\n\nexport function calculateScore(squares) {\n\n    let horizontalScores = calculateHorizontalScore(squares);\n    let verticalScores = calculateVerticalScore(squares);\n    let diagonalFromLeftScores = calculateDiagonalFromLeftScore(squares);\n    let diagonalFromRightScores = calculateDiagonalFromRightScore(squares);\n\n    let scores = {\n        'red' : 0,\n        'blue': 0\n    };\n\n    for (let key in scores) {\n        scores[key]= (\n            horizontalScores[key]\n            + verticalScores[key]\n            + diagonalFromLeftScores[key]\n            + diagonalFromRightScores[key]\n        )\n    };\n    return scores;\n}\n\nexport function isEndgame(legalMoves) {\n    let anyLegal = {\n        'red': false,\n        'blue': false\n    };\n    for (let row of legalMoves) {\n        for (let square of row) {\n            for (let key in anyLegal) {\n                if (!anyLegal[key] && (square[key]['star'] || square[key]['circle'])) {\n                    anyLegal[key] = true\n                }\n            }\n        }\n    }\n    // If there are legal moves for BOTH red and blue remaining, return true\n    return !(anyLegal['red'] && anyLegal['blue']);\n}\n\nexport function completeEndgame(squares, legalMoves) {\n    alert(\"No choices left for remaining squares! Empty squares will be filled automatically.\")\n    // Fill in the squares with blue/red as possible\n    let completed_squares = squares.slice();\n    for (let rowIndex in completed_squares) {\n        for (let columnIndex in completed_squares[rowIndex]) {\n            // If the square is unoccupied\n            if (!completed_squares[rowIndex][columnIndex]) {\n                let legalMove = legalMoves[rowIndex][columnIndex];\n                if (legalMove['red']['star'] || legalMove['red']['circle']) {\n                    completed_squares[rowIndex][columnIndex] = new Token('red', 'null')\n                }\n                if (legalMove['blue']['star'] || legalMove['blue']['circle']) {\n                    completed_squares[rowIndex][columnIndex] = new Token('blue', 'null')\n                }\n            }\n        }\n    }\n    return completed_squares\n}\n\nexport function updateBlackout(squares, legalMoves) {\n    for (let rowIndex in squares) {\n        for (let columnIndex in squares[rowIndex]) {\n            let square = squares[rowIndex][columnIndex];\n            let legal = legalMoves[rowIndex][columnIndex];\n            if (!square && !legal['red']['circle'] && !legal['red']['star'] && !legal['blue']['circle'] && !legal['blue']['star']) {\n                let token = new Token('black', 'null');\n                squares[rowIndex][columnIndex] = token;\n            }\n        }\n    }\n    return squares\n}"],"sourceRoot":""}